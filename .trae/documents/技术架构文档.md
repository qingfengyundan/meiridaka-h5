# æ¯æ—¥æ‰“å¡åº”ç”¨ - æŠ€æœ¯æ¶æ„æ–‡æ¡£

## 1. æ¶æ„è®¾è®¡

```mermaid
graph TD
    A[ç”¨æˆ·æµè§ˆå™¨] --> B[Reactå‰ç«¯åº”ç”¨]
    B --> C[æœ¬åœ°å­˜å‚¨ LocalStorage]
    B --> D[æƒé™ç®¡ç†æ¨¡å—]
    B --> E[ä»»åŠ¡ç®¡ç†æ¨¡å—]
    B --> F[ç§¯åˆ†ç³»ç»Ÿæ¨¡å—]
    B --> G[æˆå°±ç³»ç»Ÿæ¨¡å—]

    subgraph "å‰ç«¯å±‚"
        B
        D
        E
        F
        G
    end

    subgraph "æ•°æ®å±‚"
        C
    end
```

## 2. æŠ€æœ¯æè¿°

- **å‰ç«¯**: HTML5 + CSS3 + åŸç”ŸJavaScript
- **æ•°æ®å­˜å‚¨**: LocalStorage (æœ¬åœ°å­˜å‚¨)
- **UIæ¡†æ¶**: åŸç”ŸCSS + å“åº”å¼è®¾è®¡
- **æƒé™ç®¡ç†**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)

## 3. è·¯ç”±å®šä¹‰

| è·¯ç”± | ç”¨é€” |
|------|------|
| /home | é¦–é¡µï¼Œæ˜¾ç¤ºä»Šæ—¥ä»»åŠ¡å’Œè¿›åº¦æ¦‚è§ˆ |
| /tasks | ä»»åŠ¡ç®¡ç†é¡µé¢ï¼Œæ”¯æŒæ·»åŠ ã€ç¼–è¾‘ã€åˆ†ç±»æŸ¥çœ‹ä»»åŠ¡ |
| /stats | æ•°æ®ç»Ÿè®¡é¡µé¢ï¼Œæ˜¾ç¤ºå®Œæˆç‡ã€ç§¯åˆ†è¶‹åŠ¿ç­‰å›¾è¡¨ |
| /shop | ç§¯åˆ†å•†åŸé¡µé¢ï¼Œç§¯åˆ†å…‘æ¢è™šæ‹Ÿå¥–åŠ± |
| /profile | ä¸ªäººä¸­å¿ƒé¡µé¢ï¼Œç”¨æˆ·ä¿¡æ¯å’Œè®¾ç½® |
| /parent | å®¶é•¿ç®¡ç†é¡µé¢ï¼Œéœ€è¦å¯†ç éªŒè¯è¿›å…¥ |

## 4. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 4.1 æƒé™ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**: å®ç°å­¦ç”Ÿå’Œå®¶é•¿ä¸¤ç§ç”¨æˆ·è§’è‰²çš„æƒé™åˆ†ç¦»

**æ ¸å¿ƒAPI**:
```javascript
// ç”¨æˆ·èº«ä»½éªŒè¯
function authenticateUser(password)

// åˆ‡æ¢ç”¨æˆ·æ¨¡å¼
function switchUserMode(mode) // 'student' | 'parent'

// æ£€æŸ¥æƒé™
function checkPermission(action, resource)

// æƒé™æ§åˆ¶è£…é¥°å™¨
function requirePermission(permission)
```

**æƒé™çŸ©é˜µ**:
| åŠŸèƒ½ | å­¦ç”Ÿæƒé™ | å®¶é•¿æƒé™ |
|------|----------|----------|
| æŸ¥çœ‹ä»»åŠ¡ | âœ… | âœ… |
| å®Œæˆä»»åŠ¡ | âœ… | âœ… |
| æ·»åŠ ä»»åŠ¡ | âœ… | âœ… |
| åˆ é™¤ä»»åŠ¡ | âŒ | âœ… |
| ä¿®æ”¹ç§¯åˆ† | âŒ | âœ… |
| æŸ¥çœ‹ç»Ÿè®¡ | âœ… | âœ… |
| ç®¡ç†å¥–åŠ± | âŒ | âœ… |

### 4.2 ä»»åŠ¡ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**: æ™ºèƒ½ä»»åŠ¡è¿‡æ»¤å’Œé¢‘ç‡ç®¡ç†

**æ ¸å¿ƒAPI**:
```javascript
// è·å–ä»Šæ—¥ä»»åŠ¡
function getTodayTasks()

// ä»»åŠ¡é¢‘ç‡è¿‡æ»¤
function filterTasksByFrequency(frequency, date)

// ä»»åŠ¡æ¨¡æ¿ç®¡ç†
function getTaskTemplates()
function createTaskFromTemplate(templateId)
```

**ä»»åŠ¡é¢‘ç‡ç±»å‹**:
```javascript
const TASK_FREQUENCY = {
    DAILY: 'daily',           // æ¯æ—¥ä»»åŠ¡
    WEEKLY: 'weekly',         // æ¯å‘¨æŒ‡å®šå¤©
    MONTHLY: 'monthly',       // æ¯æœˆæŒ‡å®šæ—¥
    TEMPORARY: 'temporary'    // ä¸´æ—¶ä»»åŠ¡
}
```

### 4.3 ç§¯åˆ†ç³»ç»Ÿæ¨¡å—

**åŠŸèƒ½æè¿°**: ç§¯åˆ†è®¡ç®—ã€ç®¡ç†å’Œå†å²è®°å½•

**æ ¸å¿ƒAPI**:
```javascript
// ç§¯åˆ†è®¡ç®—
function calculatePoints(taskId, completionTime)

// ç§¯åˆ†ç®¡ç† (å®¶é•¿æƒé™)
function updateTaskPoints(taskId, points)

// ç§¯åˆ†å†å²
function getPointsHistory(dateRange)

// ç§¯åˆ†ç»Ÿè®¡
function getPointsStatistics()
```

### 4.4 æˆå°±ç³»ç»Ÿæ¨¡å—

**åŠŸèƒ½æè¿°**: æˆå°±å®šä¹‰ã€è§£é”æ¡ä»¶å’Œè¿›åº¦è¿½è¸ª

**æˆå°±å®šä¹‰**:
```javascript
const ACHIEVEMENTS = [
    {
        id: 'first_task',
        name: 'åˆæ¬¡å°è¯•',
        description: 'å®Œæˆç¬¬ä¸€ä¸ªä»»åŠ¡',
        icon: 'ğŸ¯',
        condition: (stats) => stats.completedTasks >= 1,
        points: 10
    },
    {
        id: 'streak_7',
        name: 'ä¸ƒæ—¥åšæŒ',
        description: 'è¿ç»­7å¤©å®Œæˆä»»åŠ¡',
        icon: 'ğŸ”¥',
        condition: (stats) => stats.streakDays >= 7,
        points: 50
    }
    // ... æ›´å¤šæˆå°±å®šä¹‰
]
```

## 5. æ•°æ®æ¨¡å‹

### 5.1 ç”¨æˆ·æ•°æ®æ¨¡å‹
```javascript
const UserModel = {
    id: 'string',
    name: 'string',
    avatar: 'string',
    level: 'number',
    totalPoints: 'number',
    currentMode: 'student' | 'parent',
    createdAt: 'timestamp'
}
```

### 5.2 ä»»åŠ¡æ•°æ®æ¨¡å‹
```javascript
const TaskModel = {
    id: 'string',
    title: 'string',
    description: 'string',
    category: 'school' | 'home' | 'temp',
    frequency: 'daily' | 'weekly' | 'monthly' | 'temporary',
    frequencyConfig: {
        weekdays: 'number[]',  // å‘¨ä»»åŠ¡ï¼š[1,3,5] è¡¨ç¤ºå‘¨ä¸€ä¸‰äº”
        monthdays: 'number[]', // æœˆä»»åŠ¡ï¼š[1,15] è¡¨ç¤ºæ¯æœˆ1å·å’Œ15å·
        endDate: 'date'        // ä¸´æ—¶ä»»åŠ¡æˆªæ­¢æ—¥æœŸ
    },
    points: 'number',
    priority: 'high' | 'medium' | 'low',
    completed: 'boolean',
    completedAt: 'timestamp',
    createdAt: 'timestamp',
    createdBy: 'student' | 'parent'
}
```

### 5.3 ç§¯åˆ†è®°å½•æ¨¡å‹
```javascript
const PointsRecordModel = {
    id: 'string',
    taskId: 'string',
    taskTitle: 'string',
    points: 'number',
    type: 'earn' | 'spend',
    description: 'string',
    createdAt: 'timestamp'
}
```

### 5.4 æˆå°±è®°å½•æ¨¡å‹
```javascript
const AchievementRecordModel = {
    id: 'string',
    achievementId: 'string',
    unlockedAt: 'timestamp',
    progress: 'number' // 0-100
}
```

## 6. æœ¬åœ°å­˜å‚¨è®¾è®¡

### 6.1 å­˜å‚¨é”®å€¼å®šä¹‰
```javascript
const STORAGE_KEYS = {
    USER_PROFILE: 'daily_checkin_user',
    TASKS: 'daily_checkin_tasks',
    POINTS_HISTORY: 'daily_checkin_points',
    ACHIEVEMENTS: 'daily_checkin_achievements',
    SETTINGS: 'daily_checkin_settings',
    PARENT_MODE: 'daily_checkin_parent_mode'
}
```

### 6.2 æ•°æ®å¯¼å‡ºæ ¼å¼
```javascript
const ExportDataFormat = {
    version: '1.0',
    exportDate: 'timestamp',
    user: 'UserModel',
    tasks: 'TaskModel[]',
    pointsHistory: 'PointsRecordModel[]',
    achievements: 'AchievementRecordModel[]'
}
```

## 7. å®‰å…¨è®¾è®¡

### 7.1 æƒé™éªŒè¯
- å®¶é•¿æ¨¡å¼å¯†ç éªŒè¯ï¼ˆé»˜è®¤ï¼š123456ï¼‰
- æ•æ„Ÿæ“ä½œäºŒæ¬¡ç¡®è®¤
- æƒé™æ£€æŸ¥ä¸­é—´ä»¶

### 7.2 æ•°æ®ä¿æŠ¤
- æœ¬åœ°æ•°æ®åŠ å¯†å­˜å‚¨
- é˜²æ­¢æ¶æ„æ•°æ®ç¯¡æ”¹
- æ•°æ®å¤‡ä»½å’Œæ¢å¤æœºåˆ¶

## 8. æ€§èƒ½ä¼˜åŒ–

### 8.1 å‰ç«¯ä¼˜åŒ–
- æ‡’åŠ è½½éå…³é”®èµ„æº
- å›¾ç‰‡å‹ç¼©å’Œç¼“å­˜
- CSSå’ŒJSä»£ç å‹ç¼©

### 8.2 æ•°æ®ä¼˜åŒ–
- æœ¬åœ°å­˜å‚¨æ•°æ®åˆ†ç‰‡
- å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®
- æ™ºèƒ½ç¼“å­˜ç­–ç•¥

## 9. å…¼å®¹æ€§æ”¯æŒ

### 9.1 æµè§ˆå™¨å…¼å®¹
- iOS Safari 12+
- Android Chrome 70+
- å“åº”å¼è®¾è®¡é€‚é…

### 9.2 è®¾å¤‡é€‚é…
- æ‰‹æœºç«¯ä¼˜å…ˆè®¾è®¡
- å¹³æ¿è®¾å¤‡é€‚é…
- è§¦æ‘¸æ“ä½œä¼˜åŒ–

---

**æ–‡æ¡£ç‰ˆæœ¬**: V1.0  
**åˆ›å»ºæ—¥æœŸ**: 2024å¹´12æœˆ  
**æŠ€æœ¯æ ˆ**: HTML5 + CSS3 + JavaScript + LocalStorage